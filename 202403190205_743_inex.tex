% 容斥原理
% keys 容斥原理|组合数学|概率论
% license Usr
% type Wiki
% \pentry{对立事件\nref{}}{nod_b221}

\subsection{容斥原理}

容斥原理是组合数学中的一个重要原理，是用于计算多个集合的并集中元素数量时的一种简化计数的方法。

通俗地,该原理可以解释为：为了找到多个集合的并集中的元素(事件)总数，我们从单个集合的大小开始计算，减去所有两个集合交集的大小，加上所有三个集合的交集的大小，依此类推，直到交集的集合数量为集合总数。

形式化地,假设我们有 \(n\) 个集合 \(A_1, A_2, \ldots, A_n\)，容斥原理可以表述为以下的公式
$
A_1 \cup A_2 \cup \ldots \cup A_n| = \sum_{i=1}^{n} (-1)^{i+1} \left( \sum_{1 \leq j_1 < j_2 < \ldots < j_i \leq n} |A_{j_1} \cap A_{j_2} \cap \ldots \cap A_{j_i}| \right)
$

这里，\( |A| \) 表示集合 \(A\) 的元素数量，而 \(A_{j_1} \cap A_{j_2} \cap \ldots \cap A_{j_i}\) 表示集合 \(A_{j_1}, A_{j_2}, \ldots, A_{j_i}\) 的交集。这个公式的第一部分 \(\sum_{i=1}^{n} (-1)^{i+1}\) 是为了交替加上和减去交集的大小，以消除重复计数的影响。

容斥原理的美妙之处在于，它提供了一种在重叠数据存在时准确计数的方法，非常适用于解决复杂的组合问题。





容斥原理. 这是种强大的技巧, 常被用来简化那些令人
头疼的计数.