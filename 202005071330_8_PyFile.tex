% Python文件读写与字符串处理
学习处理文件和保存数据可让你的程序使用起来更容易: 用户将能够选择输入什么样的数据， 以及在什么时候输入; 用户使用你的程序做一些工作后, 可将程序关闭, 以后再接着往下做．
\subsection{Python文件方法}
\textbf{\verb|open()| 方法}

Python \verb|open()| 方法用于打开一个文件，并返回文件对象，在对文件进行处理过程都需要使用到这个函数，如果该文件无法被打开，会抛出错误．


\verb|open()| 函数常用形式是接收两个参数：\textbf{文件名}(file)和\textbf{模式}(mode)．
\begin{lstlisting}[language=python]
open(file, mode='r')
\end{lstlisting}
此方法有很多其他参数，一般情况下用不到．其中\verb|file| 必需，是文件路径(相对或者绝对路径); \verb|mode| 可选，代表文件打开模式．打开模式有多种方式．
\begin{table}[ht]
\centering
\caption{打开模式}\label{PyFile_tab1}
\begin{tabular}{|c|c|}
\hline
r & 以只读方式打开文件 \\
\hline
w & 打开一个文件只用于写入．如果该文件已存在则打开文件，并从开头开始编辑，即原有内容会被删除．如果该文件不存在，创建新文件． \\
\hline
b & 二进制模式 \\
\hline
+ & 打开一个文件进行更新(可读可写) \\
\hline
a & 打开一个文件用于追加．如果该文件已存在, 新的内容将会被写入到已有内容之后; 如果该文件不存在, 创建新文件进行写入 \\
\hline
&上述方式组合使用   \\
\hline
\end{tabular}
\end{table}

\textbf{\verb |close()| 方法}

\verb| close()| 方法关闭该文件，这之后便不能再进行写入. 语法：
\begin{lstlisting}[language=python]
file.close()
\end{lstlisting}

\textbf{注意}：使用 \verb|open()| 方法一定要保证关闭文件对象，即调用 \verb|close()| 方法． 举例：计算机上有一个文件名为\verb|file．txt|的文件,内容如\autoref{PyFile_fig2}所示, 需要读取并输出．代码如下
\begin{figure}\label{PyFile_fig2}[ht]
\centering
\includegraphics[width=5cm]{./figures/PyFile_1.png}
\caption{file文件内容} \label{PyFile_fig1}
\end{figure}
\begin{lstlisting}[language=matlab]
fo=open(r'C:\Users\shizy\Desktop\file.txt')
print("文件名: ", fo.name)
print("是否已关闭 : ", fo.closed)
print("访问模式 : ", fo.mode)
str = fo.read()
print(str)
fo.close()
\end{lstlisting}
输出如下
\begin{lstlisting}[language=python]
文件名:  C:\Users\shizy\Desktop\file.txt
是否已关闭 :  False
访问模式 :  r
3.1415926
1234567
abcdefg
\end{lstlisting}
上述代码第一个\verb|open|方法前面我们添加了一个\verb|r|，表示原生字符串，否则\verb|\|会对字符串进行转义处理． 当然也可以不加\verb|r|, 而使用两个\verb|\|, 效果一样． 我们在程序2-4行分别使用了文件的三种其他方法：

\verb|file.closed|	返回true如果文件已被关闭，否则返回false．

\verb|file.mode|	返回被打开文件的访问模式．

\verb|file.name|	返回文件的名称.


\textbf{\verb|write()|方法}

\verb|write()|方法可将任何字符串写入一个打开的文件．需要重点注意的是，Python字符串可以是二进制数据，而不是仅仅是文字．\verb|write()|方法不会在字符串的结尾添加换行符('\verb|\n|'). 语法如下：
\begin{lstlisting}[language=python]
fo = open("file2.txt", "wb")
fo.write( "Hello Python\n");
# 关闭打开的文件
fo.close()
\end{lstlisting}

\textbf{\verb|readline()|方法}

\verb|readline()| 会从文件中读取单独的一行．换行符为 '\verb|\n|'．\verb|readline()| 如果返回一个空字符串, 说明已经已经读取到最后一行．

\textbf{\verb|readlines()|方法}

\verb|readlines()| 将以列表的形式返回该文件中包含的\textbf{所有行}，列表中的一项表示文件的一行．如果设置可选参数 sizehint, 则读取指定长度的字节, 并且将这些字节按行分割．

上面介绍的文件读写方法虽然没问题，但是一般情况下我们不使用，而是使用\verb|with| 方法．
\subsection{从文件中读取数据}
