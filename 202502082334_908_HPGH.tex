% 希尔伯特旅馆悖论（综述）
% license CCBYSA3
% type Wiki

本文根据 CC-BY-SA 协议转载翻译自维基百科\href{https://en.wikipedia.org/wiki/Hilbert\%27s_paradox_of_the_Grand_Hotel}{相关文章}。

希尔伯特的大酒店悖论（口语化：无限酒店悖论或希尔伯特的酒店）是一个思想实验，用来说明无限集合的一个违反直觉的性质。实验表明，即使一个完全占满的酒店有无限多的房间，它仍然可以容纳更多的客人，甚至是无限多的客人，而且这一过程可以无限次地重复。这个想法由大卫·希尔伯特在1925年的讲座《关于无限》中提出，并在《希尔伯特2013年论文集》（第730页）中重印，后来通过乔治·伽莫夫1947年的书籍《一二三……无限》得到了广泛传播。[1][2]
\subsection{悖论}  
希尔伯特设想了一个假想的酒店，房间按1、2、3等顺序编号，且没有上限。这被称为可数无限数量的房间。最初，每个房间都已被占满，但新客人到来，每个人都希望拥有自己的房间。一个正常的、有限的酒店在每个房间都已满员时无法容纳新客人。然而，可以证明，现有的客人和新来的客人——即使是无限多的——都可以在这个无限酒店里各自拥有一个房间。
\subsubsection{有限数量的新客人}  
如果有一个额外的客人，酒店可以容纳他们和现有的客人，只需要让所有现有客人同时换房。现在在1号房间的客人移到2号房间，在2号房间的客人移到3号房间，依此类推，把每个客人从他们当前的房间n移到房间n+1。由于无限酒店没有最终房间，所以每个客人都有新的房间可以去。这样一来，1号房间就空了，新客人可以被安排到这个房间。通过重复这个过程，就可以为任何有限数量的新客人腾出房间。一般来说，当有k个客人需要房间时，酒店可以应用相同的程序，把每个客人从房间n移到房间n+k。
\subsubsection{无限多的新客人}
\begin{figure}[ht]
\centering
\includegraphics[width=10cm]{./figures/6d84c164267a5248.png}
\caption{通过将每个客人移动到他们之前房间号的两倍位置，可以容纳无限数量的新客人。} \label{fig_HPGH_1}
\end{figure}
同样也可以容纳可数无限多的新客人：只需将占用1号房间的人移到2号房间，将占用2号房间的人移到4号房间，通常，将占用n号房间的人移到2n号房间（n的两倍），这样所有奇数编号的房间（它们是可数无限的）就会空出来，供新客人使用。
\subsubsection{无限多的车厢，每个车厢有无限多的乘客 } 
可以通过几种不同的方法容纳可数无限多的车厢，每个车厢有可数无限多的乘客。大多数方法依赖于车厢中的座位已经编号（或使用可数选择公理）。一般来说，任何配对函数都可以用来解决这个问题。对于这些方法中的每一种，考虑乘客在车厢中的座位号为 \( n \)，车厢号为 \( c \)，然后将 \( n \) 和 \( c \) 输入配对函数的两个参数。

\textbf{质数幂法}  

将房间 \( i \) 的客人送到房间 \( 2^i \)，然后将第一车厢的乘客放入房间 \( 3^n \)，第二车厢的乘客放入房间 \( 5^n \)；一般来说，对于车厢号 \( c \)，我们使用房间 \( p_c^n \)，其中 \( p_c \) 是第 \( c \) 个奇质数。这个解决方案会留下某些空房间（这些空房间可能对酒店有用，也可能无用）；具体来说，所有不是质数幂的数字，比如15或847，将不再被占用。（因此，严格来说，这表明到达的客人数量小于或等于创造的空房间数量。通过独立的方式更容易证明，到达的客人数量也大于或等于空房间数量，因此它们是相等的，而不是修改算法使其精确匹配。）  
（如果交换 \( n \) 和 \( c \)，该算法同样有效，但无论选择哪个，都必须在整个过程中统一应用。）

\textbf{质因数分解法 } 

每个乘客根据其座位 \( s \) 和车厢 \( c \) 可以被安排到房间 \( 2^s 3^c \)（假设对于已经在酒店的客人，\( c = 0 \)，对于第一车厢的乘客，\( c = 1 \)，依此类推）。由于每个数字都有唯一的质因数分解，可以很容易地看出所有人都会有自己的房间，且没有两个人会被安排到同一个房间。例如，房间2592（\( 2^5 3^4 \)）的客人原本坐在第四车厢的第五个座位。像质数幂方法一样，这种解决方案也会留下某些空房间。

这种方法也可以很容易地扩展到无限晚、无限次进出等情况（\( 2^s 3^c 5^n 7^e \dots \)）。

\textbf{交错法}  

对于每个乘客，将 \( n \) 和 \( c \) 的长度进行比较，采用任何位置数字系统，如十进制。（将每个酒店住客视为车厢 #0 的乘客。）如果某个数字较短，则在前面加零，直到两个数字的位数相同。将这些数字交错排列以生成房间号：其数字将是 [车厢号的第一位数字] - [座位号的第一位数字] - [车厢号的第二位数字] - [座位号的第二位数字] - 依此类推。酒店（车厢 #0）中房间号为 1729 的住客将被转到房间 01070209（即房间 1,070,209）。车厢 789 中座位 1234 的乘客将转到房间 01728394（即房间 1,728,394）。

与质数幂方法不同，这种方法将完全填满酒店，并且我们可以通过逆向交错过程重建乘客的原始车厢和座位号。首先，如果房间号的数字位数是奇数，则在前面加零。然后将该数字解交错为两个数字：车厢号由奇数位数字组成，座位号由偶数位数字组成。当然，原始编码是任意的，两个数字的角色可以互换（座位号为奇数位，车厢号为偶数位），只要一致地应用即可。

\textbf{三角形数法}  

酒店中已经住客的房间号将被移动到 \( \frac{n^2 + n}{2} \)，即第 \( n \) 个三角形数。车厢中的乘客将被安排在房间号 \( \frac{(c + n - 1)^2 + c + n - 1}{2} + n \)，即 \( (c + n - 1) \) 个三角形数加上 \( n \)。通过这种方式，所有的房间都将被填满，并且每个房间只会有一个住客。

这个配对函数可以通过将酒店结构化为一个深度为一层、无限高的金字塔来直观展示。金字塔的最顶层是一个房间：房间 1；第二层是房间 2 和 3；以此类推。由最右侧房间组成的列将对应于三角形数。一旦这些房间被填满（通过酒店住客的重新分配），剩余的空房间将形成一个与原始形状完全相同的金字塔形状。因此，整个过程可以对每个无限集合重复进行。虽然一次处理每个车厢需要无限的步骤，但通过使用先前的公式，乘客可以确定他们的房间“将会是”哪个房间，一旦他们的车厢到达该过程，就可以直接前往。