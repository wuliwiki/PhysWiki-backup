% 编辑器事项

\subsection{Editor BUG}

\begin{itemize}
\item 自动补全设置里面的顺序不能决定候选的顺序

\item 符号替换的目标不能为 "*" （还有什么符号不能作为目标？）
\end{itemize}

\subsubsection{自动引用问题}
【完成】自动引用（例如引用本文公式）时会出现 “PhysWikiScan 正在处理， 请稍后\dots\dots” 会一直转圈．

\subsubsection{itemize 环境中的美元符号补全}
\begin{itemize}
\item 【完成】打第一个美元符号不会出现一对美元符号 $abc^2$

\item 【完成】手动打第二个美元符号时会出现两个 $1 + x (x \in X)$
\end{itemize}

\subsubsection{表格以后的正文高亮}
【完成】 “原子单位\upref{AU}” 的表格中和表格结束以后所有字体都变成了橙色

\subsection{Editor TODO}

\begin{itemize}
\item 【完成】设置菜单中 “恢复默认设置” 时， 恢复到 note-template 中的设置

\item 【完成】增加一个脚注按钮， 插入 \lstinline|\footnote{脚注}|， 并自动选中 “脚注”

\item 【完成】增加一个代码按钮， 图标为 \lstinline|</>|， 按下以后弹出输入框 “请指定语言（不指定则没有高亮）” \lstinline|"\\begin{lstlisting}[language=输入的语言]\n${1}\n\\end{lstlisting}"|

\item 【完成】“插入词条引用按钮” 同时也插入词条的中文名， 且自动选中中文名以便修改． 例如 “词条示例\upref{Sample}”

\item 【完成】保存缓慢时区分是因为网络缓慢还是 PhysWikiScan 无响应． 如果是前者， 就一直尝试连接直到手动关闭提示框．

\item 【完成】上传的图片保存文件名的格式为 "词条名_序号.后缀名"

\item iOS 的 Safari 中拖动文字导致拖动整个屏幕

\item iOS 的 Safari 中选中文字光标位置错误

\item iOS 的 Safari 中键盘有时候无法弹出（即使外接键盘）

\item 【完成】选中一段文字后点击链接按钮， 插入 \lstinline|\href{http://www.example.com}{被选中的文字}|， 自动选中网址
\end{itemize}

\subsubsection{公式编辑器相关}
\begin{itemize}
\item 已使用 \href{http://www.wiris.net/client/editor/resources/help.html?v=7.9.0.6564}{MathType Web} 作为公式编辑器插件（比上面那个 codecogs 颜值高多了）．初次使用该功能时将动态加载插件，国内测试加载时间约为 10-12s，此后使用可直接打开无需再加载．
目前公式编辑器仅在 Chrome 上测试正常，其他平台未知．已知的 bug 如下：

\item 由于站点问题，编辑器加载有时会失败（提示 Connection Reset），需要支持自动重新加载

\item 因为是基于 CSS 排版且用的不是数学专用字体（Times New Roman），编辑中的公式显示会和 MathJax 显示的存在样式和位置上的出入（TODO：字体看看有没有办法引用 MathJax 的字体）

\item Edge 下点击 “确定” 按钮不能正常插入公式

\item 移动端下不能显示 “确定” 和 “取消” 按钮

\item TODO：对公式编辑器支持插入的符号进行完善，已经按照百科词条加了一些常用符号，看还有什么需求（是否需要一个复制 LaTeX 而不关闭编辑器的按钮？）

\item TODO：编辑器的布局改进，显示位置调整，等等

\item GUI 公式编辑器插入公式

\item 【暂时不需要】TODO：因该插件不支持 physics 宏包，选中大多数词条中现有公式的 LaTeX 打开编辑器，是无法正确显示的（如 $I = \int \bvec j \vdot \dd{\bvec S}$ 选中这段打开编辑器），并且由编辑器生成的 LaTeX 也不符合百科的命令规范（但显示效果基本一致），需编写 processor 对命令进一步转换，如将$\frac{\partial^{n}{\cdot}}{\partial{\cdot}^{n}}$ 转换成 $\pdv[n]{\cdot}{\cdot}$，$\left\langle{\cdot}\vert{\cdot}\right\rangle$ 转换成 $\braket{\cdot}{\cdot}$ etc.
\end{itemize}

\subsection{PhysWikiScan BUG}

\subsection{changed}
\begin{itemize}
\item changed.txt 中只有一个词条的时候， 发布词条会提示错误． 为空时也会错误？
\end{itemize}

\subsubsection{表格标签多次定义}
【完成】删除某个表格再重新插入一个具有同样标签的表格就会出现 “标签多次定义” 的错误．

\subsubsection{表格标题}
【完成】第二个表格会具有第一个表格的标题

\subsection{PhysWikiScan TODO}

\subsubsection{改用 MathJax2}
【完成】MathJax3 在 iOS 的 Safari 上显示有时候公式上半部分消失． 注意当前的 MathJax3 文件夹复制一个备份

\subsubsection{不要使用 MathJax 的 newcommand}
\begin{itemize}
\item 【完成】而是直接进行命令替换， 从而增加公式代码在其他网站的兼容性
\end{itemize}

\subsubsection{脚注加上返回链接}
参考维基百科和知乎． 或者是否可以做成点了以后直接弹出一个子窗口而不是跳到底部？ 如何实现？
