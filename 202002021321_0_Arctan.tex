% 四象限 Arctan 函数
% atan2|反三角函数|反正切|arctan

我们经常会遇到这样一个问题： 已知平面直角坐标系上一点 $P$， 坐标为 $(x, y)$， 求射线 $OP$ 与 $x$ 轴正方向的夹角 $\theta$．%图未完成
首先我们要给这个夹角取一个范围， 一般来说既可以取 $[0, 2\pi)$ 也可以取 $(-\pi, \pi]$， 但如无特殊说明， 我们统一使用后者．

一些教材中通常直接用 $\theta = \arctan(y/x)$ 来表示这一关系， 但这仅适用于 $x > 0$ 的情况， 当 $x < 0$ 时 $\theta$ 的范围仍然只能取 $(-\pi/2, \pi/2)$．

所以我们来定义一个符合要求的新函数， 记为 $\Arctan(y, x)$ \footnote{在许多编程语言中 $\arctan$ 被记为 \lstinline|atan|， $\Arctan$ 被记为 \lstinline|atan2|． 也有一些教材将 $\Arctan$ 记为 $\opn{Tan}^{-1}$}．

\begin{equation}\label{Arctan_eq1}
\Arctan(y,x) \equiv 
\leftgroup{
&\arctan (y/x) &\quad &(x > 0)\\
&\arctan (y/x) + \pi  &&(x < 0,\,y \geqslant 0)\\
&\arctan (y/x) - \pi  &&(x < 0,\,y < 0)\\
&\pi /2  &&(x = 0, \,y > 0)\\
& -\pi /2  &&(x = 0, \,y < 0)\\
&0 && (x=0,\,y=0)
}
\end{equation}

注意这个函数在除了在原点和 $x$ 轴的负半轴， 其它地方都是连续且光滑的．
