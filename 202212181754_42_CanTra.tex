% 正则变换
% keys 哈密顿量|分析力学|拉格朗日|哈密顿原理|哈密顿正则方程|正则变换

\begin{issues}
\issueDraft
\end{issues}

\pentry{哈密顿正则方程\upref{HamCan}}
\subsection{简介}
简单来说，正则变换就是在相空间中选择另一组变量 $P,Q$ 作为坐标，使得和原来的变量 $p,q$ 之间一一对应，并且要求新坐标 $P,Q$ 仍满足哈密顿正则方程。
\subsection{为什么要作正则变换}
若存在循环坐标 $q^s$， 即拉氏量 $L$ 不显含 $q^s$，则哈密顿量
\begin{equation}
H=\sum_i p_i\dot q^i-L
\end{equation}
显然也不含循环坐标 $q^s$。由哈密顿正则方程\autoref{HamCan_eq2}~\upref{HamCan}
\begin{equation}
\dot p_s=-\pdv{H}{q^s}=0
\end{equation}
即 $p_s$ 是体系的循环积分（守恒量）。

然而，从下面的例子可以看到，能否出现循环坐标及循环坐标的数量则是同坐标系的选择直接相关。
\begin{example}{}
已知在二维平面上，质量为 $m$ 的质点受到来自 $O$ 点的引力场的作用（引力势能为 $-\mu\frac{m}{r}$）。那么在极坐标和平面直角坐标系下，其拉氏量和动量分别为
\begin{equation}
\begin{aligned}
L&=\frac{m}{2}\qty(\dot r^2+r^2\dot\theta^2)+\mu\frac{m}{r}\\
L&=\frac{m}{2}\qty(\dot x^2+\dot y^2)+\mu\frac{m}{\sqrt{x^2+y^2}}\\
p_\theta&=\pdv{L}{\dot \theta}=mr^2\dot\theta\\
p_r&=\pdv{L}{\dot r}=m\dot r\\
p_x&=\pdv{L}{\dot x}=m\dot x\\
p_y&=\pdv{L}{\dot y}=m\dot y
\end{aligned}
\end{equation}

而哈密顿量分别为（注意，在拉氏量 $L=T-V$ 时，$H=T+V$）
\begin{equation}
\begin{aligned}
H&=\frac{m}{2}\qty(\dot r^2+r^2\dot\theta^2)-\mu\frac{m}{r}\\
&=\frac{1}{2m}\qty(p_r^2+\frac{p_\theta^2}{r^2})-\mu\frac{m}{r}\\
H&=\frac{m}{2}(\dot x^2+\dot y^2)-\mu\frac{m}{\sqrt{x^2+y^2}}\\
&=\frac{1}{2m}\qty(p_x^2+p_y^2)-\mu\frac{m}{\sqrt{x^2+y^2}}
\end{aligned}
\end{equation}

从哈密顿量看到，在极坐标系中 $\theta$ 是循环坐标，从而就有一循环积分；而在直角坐标系中，并无循环坐标存在。 
\end{example}

\footnote{参考 \cite{Goldstein}。}对于同一系统， 我们可以采用不同的广义坐标， 广义动量和哈密顿量。 那么如何在这些不同选择中做变换呢？ 我们把一组广义坐标和广义动量记为 $q_1,\dots, q_N, p_1, \dots, p_N$， 哈密顿量为 $H(q, p, t)$。 另一组记为 $Q_1,\dots, Q_N, P_1, \dots, P_N$， 哈密顿量为 $K(Q, P, t)$。 那么他们满足什么关系，或者在二者之间进行变换呢？

首先， 根据勒让德变换\autoref{HamCan_eq1}~\upref{HamCan}， 拉格朗日量可以表示为
\begin{equation}
L = \sum_i \dot q_i p_i - H(q, p, t)
\end{equation}

如果对于不同的变量 $Q, P$， 以及哈密顿量 $K$， 那么

代入哈密顿原理

* 生成函数并不能生成所有的正则变换， 另一种方法是什么矩阵
