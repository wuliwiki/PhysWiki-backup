% 自然对数函数
% keys 微积分|自然对数|自然对数底|e

\pentry{极限\upref{Lim}， 对数函数}
微积分中有一个重要的极限，极限值是一个无理数，叫做\textbf{自然对数底}，记为\footnote{为了与其他变量区分， 本书使用正体字母表示自然对数底．} $\E$． 它是一个无限不循环小数
\begin{equation}\label{E_eq1}
\E \equiv \lim_{x \to 0} (1 + x)^{\frac{1}{x}} = 2.7182818284590452\dots
\end{equation}
注意这里没有指定 $x\to 0$ 的方向， 即无论 $x$ 正数或负数该式都成立． $\E$ 也可以用无穷级数定义为
\begin{equation}\label{E_eq2}
\E \equiv \sum_{n=0}^\infty \frac{1}{n!} = 1 + 1 + \frac{1}{2} + \frac{1}{6} + \dots
\end{equation}
\addTODO{证明两种定义等效}
令 $k$ 为常数， 可以把\autoref{E_eq1} 拓展得
\begin{equation}
\lim_{x \to 0} (1 + kx)^{\frac{1}{kx}} = \E
\end{equation}
当 $k = -1$ 时易得
\begin{equation}\label{E_eq3}
\lim_{x \to 0} (1 - x)^{\frac{1}{x}} = \qty[\lim_{x \to 0} (1 - x)^{\frac{1}{-x}}]^{-1} = \frac{1}{\E} = 0.36787944117144232\dots
\end{equation}

\subsection{数值验证}
这里先用数值的方法验证\autoref{E_eq1} ， 首先我们可以画出 $(1+x)^{1/x}$ 在原点附近的函数图， 注意当 $x = 0$ 时， 该函数无定义， 但这并不妨碍极限的存在． 可以看到， 无论 $x$ 从左边还是右边趋近于原点（即左极限和右极限）， 结果都相等．
\begin{figure}[ht]
\centering
\includegraphics[width=8cm]{./figures/E_1.pdf}
\caption{$(1+x)^{1/x}$ 的函数图} \label{E_fig1}
\end{figure}

\autoref{E_tab1} 用数值计算验证\autoref{E_eq1} 的右极限．
\begin{table}[ht]
\centering
\caption{极限 $\E$ 数值验证（保留 6 位有效数字）}\label{E_tab1}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
$x$ & $10^{-1}$ & $10^{-2}$ & $10^{-3}$ & $10^{-4}$ & $10^{-5}$ & $10^{-6}$ \\
\hline
$(1 + x)^{1/x}$ & $2.59374$ & $2.70481$ & $2.71692$ & $2.71815$ & $2.71827$ & $2.71828$ \\
\hline
\end{tabular}
\end{table}

\subsection{简单应用}
\pentry{随机变量 概率分布函数\upref{RandF}}
为什么说自然对数底是 “自然” 的呢？ 我们来看一个例子．

\begin{example}{彩票中奖概率分布}
假设某种彩票从 $t = 0$ 开始每 $\Delta t$ 开奖一次， 开奖时每张彩票有 $\Delta P$ 的概率中奖， 每张彩票可以参加任意多次抽奖\footnote{也可以假设每张彩票只能抽一次， 但每次抽奖后就立即购买一张新彩票．}． 令 $\lambda = {\Delta P}/{\Delta t}$， 为了让问题更连续， 考虑极限 $\Delta t\to 0$ 的情况， 对每种彩票， $\lambda$ 是一个常数． 求第一次中奖时间概率分布\upref{RandF} $f(t)$ 以及期望值．

先考虑离散情况， 画出概率树， 在第 $N$ 次开奖时第一次中奖的概率为（注意要保证前 $N-1$ 次未中奖）
\addTODO{概率树图}
\begin{equation}
P(N) = (1-\Delta P)^{N-1} \Delta P
\end{equation}
即在时间 $t = N\Delta t$ 第一次中奖的概率为
\begin{equation}
P(t) = (1-\lambda\Delta t)^{\frac{t}{\Delta t}-1} \lambda\Delta t
= [(1-\lambda\Delta t)^{\frac{1}{\lambda\Delta t}}]^{\lambda t} \frac{\lambda\Delta t}{1-\lambda\Delta t}
\end{equation}

接下来， 我们假设该彩票开奖的时间越来越短， 但始终保持 $\lambda$ 不变． 那么根据\autoref{E_eq3}， 在极限 $\Delta t\to 0$ 下， 上式中方括号等于 $1/\E$， 而右边的分式变为 $\lambda \Delta t$， 即
\begin{equation}
P(t) = \lambda\E^{-\lambda t}\Delta t
\end{equation}
所以第一次中奖时间的概率分布为
\begin{equation}
f(t) = \lim_{\Delta t\to 0} \frac{P(t)}{\Delta t} = \lambda\E^{-\lambda t}
\end{equation}
可以验证归一化条件
\begin{equation}
\int_0^{+\infty} f(t) \dd{t} = \int_0^{+\infty} \lambda\E^{-\lambda t} \dd{t} = 1
\end{equation}
进而可以计算第一次中奖时间的期望值为
\begin{equation}
\int_0^{+\infty} t f(t) \dd{t} = \int_0^{+\infty}t \lambda\E^{-\lambda t} \dd{t} = \frac{1}{\lambda}
\end{equation}
\end{example}


\subsection{自然对数函数}
以 $\E$ 为底的对数函数 $\log_{\E} x$ 叫做\textbf{自然对数}， 通常记为
\begin{equation}
\ln x \qquad \text{或} \qquad \log x
\end{equation}
函数图如\autoref{E_fig2} ．
\begin{figure}[ht]
\centering
\includegraphics[width=7cm]{./figures/E_2.png}
\caption{几种不同底的对数函数} \label{E_fig2}
\end{figure}
回忆对数函数的性质
\begin{equation}
\log_a x = \frac{\log_c x}{\log_c a}
\end{equation}
所以不同底的对数函数是成比例的．
