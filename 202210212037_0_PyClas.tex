% Python 的类
% keys Python|编程|数值计算

\begin{issues}
\issueDraft
\end{issues}

\addTODO{类和继承参考\href{https://www.w3schools.com/python/python_inheritance.asp}{这里}， 算符重载参考\href{https://www.geeksforgeeks.org/operator-overloading-in-python/}{这里}．}

\begin{lstlisting}[language=python]
# 定义 person 类
class person(): # 括号可以省略
    def __init__(self, name, age): 
        self.name = name 
        self.age = age 
    def show(self): 
        print("name is", self.name ) 
        print("age is", self.age ) 

# 生成对象
p1 = person("jason", "30") 
p2 = person("justin", "28")
# 调用成员函数
p1.show();
p2.show();
\end{lstlisting}
运行结果
\begin{lstlisting}
name is jason
age is 30
name is justin
age is 28
\end{lstlisting}

来定义一个平面点类
\begin{lstlisting}[language=python]
class point:
    def __init__(self, x, y): 
        self.x = x 
        self.y = y 
    def __str__(self): # 用于 print()
        return "({0}, {1})".format(self.x, self.y)
    def __add__(self, other): # 算符 +， self 必须是第一个变量
        if isinstance(other, point):
            return point(self.x + other.x, self.y + other.y)
        else:
            return point(self.x + other, self.y + other)
\end{lstlisting}
\begin{itemize}
\item 算符对应的函数名： \verb|__add__|（\verb|+|）， \verb|__sub__|（\verb|-|）， \verb|__mul__|（\verb|*|）， \verb|__truediv__|（\verb|/|）， \verb|__floordiv__|（\verb|//|）， \verb|__mod__|（\verb|%|）， \verb|__lshift__|（\verb|<<|）， \verb|__rshift__|（\verb|>>|）， \verb|__and__|（\verb|&|）， \verb|__or__|（\verb`|`）， \verb|__xor__|（\verb|^|）， \verb|__invert__|（\verb|~|）， \verb|__lt__|（\verb|<|）， \verb|__le__|（\verb|<=|），\verb|__eq__|（\verb|==|），\verb|__ne__|（\verb|!=|），\verb|__gt__|（\verb|>|），\verb|__ge__|（\verb|>=|）
\item \verb|__radd__(self, other)| 可以定义 \verb|other + self| （当 \verb|other| 具有不同类型时会被调用）．
\item 用 \verb|dir(obj)| 查看对象的所有性质（attributes）
\item 用 \verb|vars(obj)| 查看对象的所有数据成员
\end{itemize}
