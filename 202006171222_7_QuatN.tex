% 四元数与旋转矩阵
% 线性代数|矩阵|绕轴旋转矩阵|旋转矩阵|四元数|基底|基底变换矩阵

\pentry{绕轴旋转矩阵\upref{RotA}， 旋转矩阵的导数\upref{RotDer}}

我们可以用\textbf{四元数（quaternions ）} $\bvec q = [s, \bvec v]$ 来表示绕轴旋转矩阵， 其中
\begin{equation}
s = \cos(\theta/2) \qquad v = \abs{\bvec v} = \sin(\theta/2)\uvec A
\end{equation}
则绕轴旋转矩阵可以表示为
\begin{equation}\label{QuatN_eq2}
\mat R(\theta) =
\begin{pmatrix}
1 - 2v_y^2 - 2v_z^2 & 2v_xv_y - 2sv_z  & 2v_x v_z + 2s v_y\\
2v_x v_y + 2sv_z & 1 - 2v_x^2 - 2v_z^2 & 2v_y v_z - 2s v_x\\
2v_x v_z - 2s v_y & 2v_y v_z + 2s v_x & 1 - 2v_x^2 - 2v_y^2
\end{pmatrix}
\end{equation}

四元数的乘法运算可以表示两个旋转矩阵相乘， 即把两次旋转合并为一次旋转
\begin{equation}
[s_1, \bvec v_1] [s_2, \bvec v_2] = [s_1 s_2 - \bvec v_1 \vdot \bvec v_2, s_1 \bvec v_2 + s_2 \bvec v_1 + \bvec v_1 \cross \bvec v_2]
\end{equation}
% 推导未完成

若从坐标系 B 到坐标系 A 的基底变换矩阵为 $\mat R$， 当 B 绕原点以角速度 $\bvec \omega$ 旋转时有
\begin{equation}
\dv{\mat R}{t} = \mat \Omega \mat R
\end{equation}
其中 $\mat\Omega$ 乘以任意位置矢量 $\bvec r$ 等于 $\bvec \omega \cross \bvec r$
\begin{equation}
\mat \Omega = \pmat{
0 & -\omega_z & \omega_y\\
\omega_z & 0 & -\omega_x\\
-\omega_y & \omega_x & 0
}\end{equation}
若旋转矩阵 $\mat R$ 对应的四元数为 $\bvec q$， 则
\begin{equation}\label{QuatN_eq1}
\dot {\bvec q}(t) = \frac12 [0, \bvec \omega(t)] \bvec q(t)
\end{equation}

% 推导大概就是旋转微小角度然后取极限
