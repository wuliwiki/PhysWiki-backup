% 正交曲线坐标系中的矢量算符
% 正交曲线坐标系|矢量分析|梯度|散度|旋度

\pentry{正交曲线坐标系\upref{CurCor}， 梯度\upref{Grad}， 旋度\upref{Curl}}

在位置矢量\upref{Disp}的全微分
\begin{equation}
\dd{\bvec r} = \pdv{\bvec r}{u}\dd{u} + \pdv{\bvec r}{v}\dd{v} + \pdv{\bvec r}{w}\dd{w}
\end{equation}
中， 令三个偏微分为 $f(u,v,w), g(u,v,w), h(u,v,w)$， 则
\begin{equation}\label{CVecOp_eq4}
\dd{\bvec r} = f\dd{u}\,\uvec u + g\dd{v}\,\uvec v + h\dd{w}\,\uvec w
\end{equation}

令 $s(u, v, w)$ 和 $\bvec A(u, v, w)$ 分别为一阶可微的标量函数和矢量函数， 且
\begin{equation}
\bvec A(u, v, w) = A_x(u, v, w)\uvec u + A_y(u, v, w)\uvec v + A_z(u, v, w)\uvec w
\end{equation}
那么该坐标系中的梯度\upref{Grad}， 散度\upref{Divgnc}， 旋度\upref{Curl}算符分别为
\begin{equation}\label{CVecOp_eq1}
\grad s = \frac{1}{f} \pdv{s}{u}\uvec u + \frac{1}{g}\pdv{s}{v} \uvec v + \frac{1}{h} \pdv{s}{w}\uvec w
\end{equation}
\begin{equation}
\div \bvec A = \frac{1}{fgh}\qty[\pdv{u}(ghA_u) + \pdv{v}(fhA_v) + \pdv{w}(fgA_w)]
\end{equation}
\begin{equation}
\begin{aligned}
&\curl \bvec A = \frac{1}{gh}\qty[\pdv{v}(hA_w) - \pdv{w}(gA_v)]\uvec u\\
&\quad + \frac{1}{fh}\qty[\pdv{w}(fA_u) - \pdv{u}(hA_w)]\uvec v
+ \frac{1}{fg}\qty[\pdv{u}(gA_v) - \pdv{v}(fA_u)]\uvec w
\end{aligned}
\end{equation}
\begin{equation}\label{CVecOp_eq6}
\laplacian s = \frac{1}{fgh}\qty[\pdv{u}\qty(\frac{gh}{f}\pdv{s}{u}) + \pdv{v}\qty(\frac{fh}{g}\pdv{s}{v}) + \pdv{w}\qty(\frac{fg}{h}\pdv{s}{w})]
\end{equation}

\subsection{梯度的推导}
由于正交曲线坐标系中任意一点处 $\uvec u, \uvec v, \uvec w$ 都互相垂直， 所以求该点处梯度的方法和直角坐标系类似： 求出三个方向的方向导数\upref{DerDir}， 并把他们作为梯度的三个分量． 和直角坐标系不同的是， $u$ 坐标增加 $\dd{u}$ 时， 位矢 $\bvec r$ 并不是沿 $\uvec u$ 移动 $\dd{u}$ 而是移动 $f \dd{u}$， 所以 $\uvec u$ 方向的方向导数是 $(\pdv*{s}{u})/f$．

当然这只是粗略的推导， 我们也可以直接把\autoref{CVecOp_eq4} 乘以\autoref{CVecOp_eq1} 得
\begin{equation}
\grad s \vdot \dd{\bvec r} = \pdv{s}{u}\dd{u} + \pdv{s}{v}\dd{v} + \pdv{s}{w}\dd{w} = \dd{\bvec s}
\end{equation}
这符合梯度的定义（\autoref{Grad_eq5}~\upref{Grad}）．

\subsection{散度的推导}
一种幼稚的想法是， 类比上面梯度的推导， 根据直角坐标系中的散度公式（\autoref{Divgnc_eq7}~\upref{Divgnc}）得
\begin{equation}
\div \bvec A = \frac{1}{f} \pdv{A_x}{u} + \frac{1}{g}\pdv{A_y}{v} + \frac{1}{h} \pdv{A_z}{w} \qquad (\text{错})
\end{equation}
这是因为在该公式的推导过程\upref{Divgnc}中， 我们假设小长方体的相对两个面的表面积是完全一样的． 在正交曲线坐标系中这是不成立的， 例如球坐标中的体积元 $r\dd{r} \cdot r\dd{\theta} \cdot r\sin\theta \dd{\phi}$ 中， 垂直于 $\uvec r$ 的两个面的表面积为 $r\dd{\theta} \cdot r\sin\theta \dd{\phi}$， 显然与 $r$ 有关， 即对 $r$ 求导不为零．

\addTODO{推导参考 \cite{GriffE} 附录．}
