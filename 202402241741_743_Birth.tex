% 生日问题
% keys 生日问题|生日悖论|概率论
% license Usr
% type Wiki

\begin{issues}
\issueDraft
\end{issues}

\subsection{生日问题}

在概率论中，生日问题是最经典的概率论问题之一。生日问题探讨的是在一个集合中随机选择的人达到至少有两个人在同一天生日的概率。这个问题的常见形式是：

\begin{example}{生日问题}
在一个房间里需要多少人，才能使得至少有两个人生日相同的概率至少为50\%？

(为了简化分析过程，假设一年有365天，不考虑闰年的2月29日，并假设每个人的生日是完全随机、相互独立的，每天被选中的概率都是相等的。)
\end{example}

要计算这个问题，我们可以采用"对立概率"的方法。我们首先计算所有人生日全都不同的概率，然后用1减去这个概率，得到至少有两个人生日相同的概率。

当第一个人进入房间时，他/她的生日可以是一年中的任何一天，所以所有人生日都不同的概率是1；当第二个人进入房间时，为了保证他/她的生日与第一个人不同，他/她的生日必须是剩下的364天中的任何一天，概率是$\frac{364}{365}$；当第三个人进入房间时，这个概率变为$\frac{364}{365} \times \frac{363}{365}$，依此类推。

因此，当有$n$个人在房间里时，所有人生日全都不同的概率可以用下面的公式表示：

\begin{equation}\label{eq_BirthID_1}
\ali{
    &P(\text{所有人生日不同}) = \frac{365}{365} \times \frac{364}{365} \times \cdots \times \frac{365-n+1}{365} \\ \\
    &P(\text{至少两人生日相同)} = 1-P(\text{所有人生日不同}) 
}~.
\end{equation}


\begin{lstlisting}[language=python]
# 计算至少两个人生日相同的概率超过50%需要的人数
# 初始化变量
days_in_year = 365
prob = 1  # 所有人生日不同的初始概率
num_people = 0  # 房间内的人数

# 计算至少两个人生日相同的概率超过50%时的人数
while prob > 0.5:
    num_people += 1
    prob *= (days_in_year - num_people + 1) / days_in_year

num_people, 1 - prob  # 返回需要的人数和对应的概率
# 结果 
# (23, 0.5072972343239857)
\end{lstlisting}

通过计算，我们发现仅需要23个人就可以使得“至少有两个人生日相同”的概率超过50\%。这个结果往往出乎大多数人的预期，因此生日问题也叫\textbf{"生日悖论"}，但它并不是真正的悖论，而是描述这种现象: 在相对较小的群体中，元素重复出现的概率比直觉上预期的要高。


生日问题不仅是一个有趣的概率论练习题目，也深刻地揭示了概率直觉与实际概率计算之间可能存在的巨大差异。






参考：普林斯顿概率论读本