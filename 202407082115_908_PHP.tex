% PHP
% license CCBYSA3
% type Wiki

（本文根据 CC-BY-SA 协议转载自原搜狗科学百科对英文维基百科的翻译）

超文本预处理器（简称PHP）是一种通用编程语言，最初是为了进行网页开发而设计的。它最初是由拉斯马斯·勒德尔夫（Rasmus Lerdorf）在1994年创建的。[1]PHP引用现在是由The PHP Group实现的。PHP最初是个人主页（Personal Home Page）的缩写，[1]但现在它是一个首字母递归型缩略词，全称为Hypertext Preprocessor，即超文本预处理器。[2]

可以通过命令行界面执行PHP代码，也可以将其嵌入到超文本标记语言代码中，还可以与各种网页模板系统、网页内容管理系统和网页框架结合运用。PHP代码通常由PHP解释器处理，该解释器以网络服务器中的一个模块或公共网关接口(CGI)可执行文件的形式安装。网络服务器将解释过和执行后的PHP代码(可能是任何类型的数据，包括图像)结果与生成的网页相结合。PHP可以用于网络环境之外的许多编程任务，例如独立的图形应用程序[3]和无人机遥控。[4]

标准的PHP解释器由Zend引擎驱动，是发布的具有PHP许可证的自由软件。PHP已经得以广泛应用，可以免费安装到与几乎所有操作系统和平台的大多数网络服务器上。

2014年之前，PHP语言一直没有书面的正式规范或标准，最初的应用充当了其他应用需遵循的实际标准。自2014年以来，人们一直在努力制定一份正式的PHP规范。[5]

\subsection{历史}
\subsubsection{1.1 早期历史}
\begin{figure}[ht]
\centering
\includegraphics[width=6cm]{./figures/e4e58f0fc803a9fc.png}
\caption\label{fig_PHP_1}
\end{figure}
Rasmus Lerdorf编写了最初的公共网关接口(CGI)组件，并与Andi Gutmann和Zeev Suraski一起重写了PHP3的解析器。

PHP的开发始于1994年，当时拉斯马斯·勒德尔夫(Rasmus Lerdorf)用C语言编写了几个通用网关接口(CGI)程序，[6][7][8] 他将这些程序扩展，以与网络表单同时使用和与数据库进行通信，并将这种操作称为“个人主页/表单解释器”（简称 PHP/FI）。

PHP/FI可以用来构建简单的动态网络应用程序。为了提高 bug报告速度并改进代码，Lerdorf最初于1995年6月8日在Usenet讨论组comp.infosystems.www.authoring.cgi上宣布发布 “个人主页工具(PHP Tools)1.0版”的PHP/FI。[9][10] 这个版本的PHP已经具备了目前使用的PHP的基本功能，包括类Perl变量、表单处理以及嵌入超文本标记语言的能力。PHP的语法类似于Perl，但更简单、应用范围较小且一致性较弱。[11]
\begin{figure}[ht]
\centering
\includegraphics[width=6cm]{./figures/66623a418461a1a7.png}
\caption\label{fig_PHP_2}
\end{figure}
早期人们并不打算把PHP发展为一种新的编程语言，但后来PHP得以有机发展。勒德尔夫（Lerdorf）回忆道:“我不知道如何停止，也从来没想过创造一种编程语言。我完全不知道如何创造编程语言，我只是不断地按照逻辑思维走下一步。”[11] 一个开发团队开始组建，几个月的工作和测试之后， 1997年11月正式发布了PHP/FI 2。

最初，PHP不是人们专门创造出来的，而是自然形成的，这一事实造成了函数命及其参数排序的不一致。[12] 在某些情况下，函数命名是为了匹配PHP正在“包装”的低级库。[13] 而在一些早期的PHP版本中，函数名的长度用作内部散列函数，因此此时，命名是为了改善散列值的分布情况。[14]
\begin{figure}[ht]
\centering
\includegraphics[width=6cm]{./figures/78e31904eb3aae33.png}
\caption\label{fig_PHP_3}
\end{figure}
\subsubsection{1.2 PHP 3和PHP 4}
\begin{figure}[ht]
\centering
\includegraphics[width=14.25cm]{./figures/4bf61896cce4c896.png}
\caption{这是WordPress内容管理系统的自定义PHP代码的一个示例。} \label{fig_PHP_4}
\end{figure}
1997年，齐夫·苏拉斯基(Zeev Suraski)和安迪·古特曼斯(Andi Gutmans)重新编写了解析器，为PHP 3奠定了基础，并将该语言的名称改为PHP。PHP是一个首字母递归型缩略词，中文全称为超文本预处理器。[11][15] 后来便开始公开测试PHP 3，其正式发布是在1998年6月。Suraski和Gutmans随后开始重新编写PHP的核心部分，并于1999年开发了Zend引擎。[16] 他们还在以色列的拉马特甘成立了泽德技术有限公司(Zend Technologies)。[11]

2000年5月22日，PHP 4发布，驱动引擎为Zend 1.0。[11] 截至2008年8月，已经出现了PHP 4.4.9版本。技术人员不会再对PHP 4进行任何开发，也不会再发布任何安全更新。[17][18]
\subsubsection{1.3 PHP 5}
2004年7月14日，PHP 5发布，由Zend引擎II（一个新的Zend引擎）驱动。[11] PHP 5具备一些新的特性，比如改进了对面向对象编程的支持，扩展了PHP数据对象(英文简称PDO，指轻薄且连续的访问数据库接口)，许多性能都得以增强。[19] 。2008年，PHP 5成为开发过程中唯一稳定的一个版本。PHP各个版本一直缺少后期静态绑定，直至PHP 5.3版才将其添加进去。[20][21]

自2008年2月5日起，由于GoPHP5倡议的缘故，许多广受关注的开源项目不再支持新代码中的PHP 4。[22] GoPHP5倡议是由一个PHP开发者联盟发起的，他们致力于促进PHP 4到PHP 5的过渡。[23][24]

随着时间的推移，现在大多数的32位和64位操作系统都可以使用PHP解释器。有两种方式，一种是使用PHP源代码构建系统，另外一种是使用预先构建的二进制文件。[25]PHP 5.3和PHP 5.4唯一可用的微软Windows二进制系统是32位x86系列版本，[26][27]且在Window64位操作系统上使用互联网信息服务(IIS)时需要开启Windows32位系统兼容模式。PHP 5.5的出现促进Windows操作系统有了64位x86-64系列版本。[28]

PHP 5.6的官方安全支持已于2018年12月31日结束，[29]但Debian 8.0 Jessies将支持延长至2020年6月。[30]
\subsubsection{1.4 PHP 6和统一码(Unicode)}
由于缺乏核心语言级别的本机Unicode支持，人们对PHP的评价褒贬不一。[31][32] 2005年启动了一个由安德烈·兹米耶夫斯基(Andrei Zmievski)带头的项目，试图通过嵌入国际统一码组件(International Components for Unicode，英文简称ICU)库，并在内部将文本字符串表示为UTF-16，使PHP各个部分都具备本地Unicode支持。[33] 由于此举会引起语言内部和用户代码发生重大改变，因此他们计划将这一特质与当时正在开发的其他主要功能结合起来，作为PHP语言6.0版本发布。[34]

然而，由于开发人员不了解必要变化，且UTF-16（很少在网络环境中使用）的转换出现性能问题，上述项目被延迟。 因此，2009年发布了PHP 5.3，该版本的诸多非Unicode特性都来自于PHP 6，尤其是名称空间。2010年3月，正式放弃该项目，并发布了PHP 5.4版本，该版本包含了PHP 6的许多其他非Unicode特性，例如Traits功能和闭包重新绑定功能。[35] 最初的设想是制定一份新的Unicode集成规划，但截至2014年，还没有采用任何一项规划。
\subsubsection{1.5 PHP 7}
2014至2015年期间技术人员开发了一个新的PHP主版本，编号为PHP 7。关于这个版本的编号有一些争论。[36]虽然PHP 6 Unicode是一个尝试，从未正式发布过，但有几篇文章和书名用了PHP 6这一说法。[37]如果新版本也用PHP 6命名的话，可能会造成混乱。人们在投票后采用了PHP 7这一名称。[38]

PHP的基础是最初叫做PHP下一代(英文简称phpng)的一个分支。phpng由德米特里·斯托戈夫(Dmitry Stogov)、陈欣·许（Xinchen Hui）和尼基塔·波波夫(Nikita Popov)创建，[39]旨在通过重构Zend引擎来优化PHP的性能，同时保持近乎完全的语言兼容性。[40]截至2014年7月14日，基于WordPress的基准工具（phpng项目的主要基准工具）显示PHP性能几乎提高100\%。对phpng进行改动旨在使性能提高变得更容易一些，因为技术人员认为使数据结构变得更紧凑以及其他变化能够增大数据成功转移到即时编译器上的概率。[41]由于牵扯到上述重大变化，改动后的Zend引擎被称为Zend引擎3，取代了PHP 5中使用的Zend引擎2。[42]

就PHP的发布过程而言， phpng内部有重大变化，因此必须要赋予它一个新的主版本号，而不是PHP 5版本的次版本号。[43]各PHP主版本具备破坏代码向后兼容性的功能，因此PHP 7带来一个机会，这个机会可以让技术人员不受phpng的束缚，做其他方面的改进。在phpng内部做改进，需要破坏向后兼容性。具体包括以下几个方面的变化:
\begin{itemize}
\item 现代面向对象的异常取代许多严重或可恢复的遗留PHP错误机制[44]
\item 改动之后，变量解引用的语法内部更加一致和完整，允许使用运算符“->”、“ ()”、“{}”、和“::”，以及任意有意义的左侧表达式[45]
\item 不再支持传统PHP 4风格的构造方法[46]
\item foreach语句的行为变得更可预测[47]
\item 之前，PHP内置的几类构造函数在失败时返回空值，为保持一致性，将返回空值改为抛出异常[48]
\item 从PHP核心成分中删除了一些未维护的或不推荐使用的服务器应用程序编程接口和扩展，最突出的是遗留的mysql扩展[49]
\item 对list()运算符的行为进行更改，以去除对字符串的支持[50]
\item 去除对传统ASP样式分隔符，如“< \%”和“\% >”和“<脚本语言="php " >...</script >”，的支持已被删除[51]
\item 之前存在允许switch语句具有多个默认子句的疏忽，改动后对此进行了修复[52]
\item 从字符串到数字类型的某些隐式转换中不再支持使用十六进制数字[53]
\item 改动左移位和右移位操作符，使其在平台间具有更加一致的表现[54]
\item 整数和浮点数之间的转换更加严格，并且在不同平台之间的转换也更加一致[54][55]
\end{itemize}
PHP 7还包含了新的语言特性。最值得注意的是，该版本引入了函数的返回类型声明， 是对现有参数类型声明的一种补充，并支持参数和返回类型声明中的标量类型(整数、浮点、字符串和布尔值)。
\subsubsection{1.6 版本发布历史记录}
\begin{table}[ht]
\centering
\caption\label{PHP}
\begin{tabular}{|c|c|c|c}
\hline
\textbf{版本} & \textbf{发布日期} & \textbf{截止日期[56]} & \textbf{备注}\\
\hline
1.0 & 1995年6月8日 &  & 正式名称为个人主页工具（英文为PHP Tools）。这也是“PHP”这个名称的首次使用。[11]\\
\hline
2.0 & 1997年11月1日	 &  & 正式名称为PHP/FI 2.0。这是第一个具有PHP实际特色的版本。PHP/FI 2.0是一种独立的语言，具有许多至今仍然沿用的特性。\\
\hline
3.0 & 1998年6月6日 & 2000年10月20日[56] & 开发人员从一个人增至多个。齐夫·苏拉斯基(Zeev Suraski)和安迪·古特曼斯(Andi Gutmans)重新编写了该版本的基础部分。[11]\\
\hline
4.0 & 2000年5月22日 & 2001年6月23日[56] & 引入了更高级的两阶段解析/执行标签解析系统，称为Zend引擎。[57]\\
\hline
4.1 & 2001年12月10日 & 2002年3月12日[56] & 引入了超级全局变量 （ 如“ \$_GET”、“\$_POST”、“\$_SESSION”等）。[57]\\
\hline
4.2 & 2002年4月22日 & 2002年9月6日[56] & 默认禁用register_globals功能。通过网络接收的数据不再直接导入全局命名空间，从而填补了应用程序中可能存在的安全漏洞。[57]
\hline
4.3 & 2002年12月27日 & 2005年3月31日[56] & 引入了命令行界面来对CGI（通用网关接口）加以补充。[58]\\
\hline
4.4 & 2005年7月11日 & 2008年8月7日[56] & 通过破坏与PHP 4.3.x编译扩展的二进制兼容性修正了一个内存损坏的错误。[59]\\
\hline
5.0 & 2004年7月13日 & 2005年9月5日[56] & 引入带有一个新对象模型的Zend引擎II。[60]\\
\hline
5.1 & 2005年11月24日 & 2006年8月24日[56] & 通过在重新设计的PHP引擎中引入编译器变量提高了性能。[60]将PHP数据对象(PDO)作为访问数据库的一致接口引入。[61]\\
\hline
5.2 & 2006年11月2日 & 2011年1月6日[56] & 默认启用过滤器扩展。支持本地JSON文件。[60]\\
\hline
5.3 & 2009年6月30日 & 2014年8月14日[56] & 具备以下特点：支持命名空间、后期静态绑定、跳转标签(转到位置受限)、闭包、PHP档案（ 英文简称为phar ）、循环引用垃圾收集、Window系统支持得以改进、sqlite3、mysqlnd取代libmysql成为与MySQL一起使用的扩展的底层库、fileinfo取代mime_magic以更好地支持 MIME、国际化扩展和废弃使用ereg扩展。\\
\hline
5.4 & 2012年3月1日 & 2015年9月3日[56] & 支持Trait功能、支持使用短数组语法，并移除以下条目：register_globals、safe_mode、allow_call_time_pass_reference、session_register()、session_unregister()和session_is_registered()；使用内置网络服务器；[62]在现有功能、性能和内存需求方面有所改进。\\
\hline
5.5 & 2013年6月20日 & 2016年7月10日[63] & 支持使用生成器和finally块（用于处理异常）；官方发行版本捆绑OpCache(以Zend Optimizer+为基础)。[64]\\
\hline
5.6 & 2014年8月28日 & 2018年12月31日[63] & 具有以下特性：常量标量表达式、变量函数、参数解包、新的指数运算符、use语句扩展函数和常量、以SAPI模块形式存在的新phpdbg调试器以及其他较小的改进。[65]\\
\hline
6.x & Not released & 不适用 & 该废弃PHP版本原计划引入本机Unicode支持。[66][67]\\
\hline
7.0 & 2015年12月3日[68] & 2018年12月3日[43] & 使用Zend引擎3（ 性能有所改进和在Windows系统上支持[41]使用64位整数）[69]；使用统一变量语法；[45]编译过程以 AST（抽象语法树）为基础；[70]引入“闭包::call()”；[71]实现平台间的按位移位一致性；[72]\\
\hline
7.0 & 2015年12月3日[68] & 2018年12月3日[43] & 使用Zend引擎3（ 性能有所改进和在Windows系统上支持[41]使用64位整数）[69]；使用统一变量语法；[45]编译过程以 AST（抽象语法树）为基础；[70]引入“闭包::call()”；[71]实现平台间的按位移位一致性；[72]使用“？？（ coalesce函数传空 ）[73]”运算符和Unicode代码点转义语法；[74]引入返回类型声明、标量类型（ 如整数、浮点、字符串和布尔值等）声明和 太空船三向比较运算符“$< = >”[75]；生成器获授权；[76]使用匿名的类；[77]使用更简单且更一致的可用CSPRNG应用编程接口；[78]用更现代的异常替换许多遗留的PHP内部错误；[44]使用简写语法以从命名空间导入多个条目。[79]\\
\hline
7.0 & 2015年12月3日[68] & 2018年12月3日[43] & 使用Zend引擎3（ 性能有所改进和在Windows系统上支持[41]使用64位整数）[69]；使用统一变量语法；[45]编译过程以 AST（抽象语法树）为基础；[70]引入“闭包::call()”；[71]实现平台间的按位移位一致性；[72]使用“？？（ coalesce函数传空 ）[73]”运算符和Unicode代码点转义语法；[74]引入返回类型声明、标量类型（ 如整数、浮点、字符串和布尔值等）声明和 太空船三向比较运算符“$< = >$”[75]；生成器获授权；[76]使用匿名的类；[77]使用更简单且更一致的可用CSPRNG应用编程接口；[78]用更现代的异常替换许多遗留的PHP内部错误；[44]使用简写语法以从命名空间导入多个条目。[79]\\
\hline
7.1 & 2016年12月1日 & 2019年12月1日[63] & 引入void返回类型和类常量的可见性修饰符[80][81]\\
\hline
7.2 & 2017年11月30日 & 2020年11月30日[63] & 使用对象参数；支持返回类型提示；[82]使用Libsodium扩展；[83]抽象方法重写；[84]拓展参数类型[85]\\
\hline
7.3 & 2018年12月6日[86] & 2021年12月6日 & 使用灵活的Heredoc和Nowdoc语法；[87],支持使用list()进行引用分配和数组解构；[88],支持PCRE 2[89], 和hrtime()函数[90]\\
\hline
7.4 & 2019年11月21日 & 2022年12月 & 类型属性为2.0；[92]支持预加载；[93]使用空合并赋值运算符；[94]改进openssl_random_pseudo_bytes；[95]支持弱引用；[96]使用外部函数接口（英文简称为FFI）[97]哈希扩展始终可用；[98]使用密码哈希注册表、[99]拆分了的多字节字符串、[100]引用反射、[101]拆分扩展/wddx[102]以及新的自定义对象序列化机制[103]\\
\hline
8.0 & 2020年第四季度或2021年第一季度 & 2023年第四季度或2024年第一季度 & 采用准时制编译(JIT)；[104]使用以负索引开始的数组；[105]内部函数[106]的一致类型错误[107]\\
\hline
\end{tabular}
\end{table}