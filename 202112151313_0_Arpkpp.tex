% Arpack++2 大型本征方程库

\begin{issues}
\issueDraft
\end{issues}

\pentry{C++ 基础\upref{Cpp0}}

\href{https://www.caam.rice.edu/software/ARPACK/}{Arpack} 最初是一个 Fortran 语言编写的， 用于求解大型本征方程的程序库．
\begin{itemize}
\item 它可以求出指定值附近的若干本征值和本征矢．
\item 它可以不需要输入矩阵本身而是输入矩阵对矢量的映射函数． 也就是你只需要提供一个函数 \verb|v = F(u)| 给 Arpack 即可， 其中 \verb|v| 就是矩阵乘以 \verb|u| 得到的矢量．
\end{itemize}

\href{http://www.ime.unicamp.br/~chico/arpack++/}{Arpack++} 是 Arpack 的 C++ 版本程序库， 但实际上只是一个 C++ 接口． 官网提供的版本已经多年没有维护（最后更新于 2000 年， 版本 1.2）， 用目前的 \verb|g++| 编译器无法正常编译． 麻省理工在 GitHub 上维护了一个新版本： \href{https://github.com/m-reuter/arpackpp}{Arpack++2}． 本文使用的是当前最新的 release 2.3．

\subsection{Ubuntu/Debian 安装}
Ubuntu/Debian 中可以直接用 apt 安装， 如果没有装 gfortran 要先 \verb|apt install gfortran|． 然后安装 \verb|apt install libarpack++2-dev|， 其实我们只需要它安装的二进制文件和 dependency． 注意 dependency 中会自动安装 OpenBlas， 如果已经装了其他版本的 Blas 如 CBLAS 可以将其手动卸载\footnote{OpenBlas 和 CBLAS 的接口不完全相同， 前者的函数使用 \lstinline|double *| 输入复数， 而后者使用 \verb|void *|， 兼容性更强． 例如本书的 SLISC0 库用 OpenBlas 就会编译出错（待更新）．}： \verb|sudo apt purge libopenblas-dev|．

安装好后， 可以用 \verb|dpkg -L libarpack++2-dev| 查看安装的文件， 其中头文件和文档可以删除， 使用 github 上的头文件和文档． doc 中的 pdf 文档是重要的参考， 其中第二章第一个例子在 \verb|examples/areig/nonsym/simple.cc| 中， 在该目录运行 \verb|make simple| 即可编译． 用 \verb|./simple| 运行．
