% 一些反直觉的概率问题
% keys 反直觉|三门|性别比|生日悖论|患病可能|贝叶斯
% license Usr
% type Wiki

概率学中涉及许多日常生活中常见的问题。然而，人类的直觉通常不适合处理概率，导致许多概率问题的结论显得与直觉不符，甚至令人惊讶。以下将介绍六个具有代表性的概率问题，这些问题通过不同的视角展示了概率的反直觉性及其背后的逻辑。

\begin{example}{抽签中的生日悖论}
在一个由 23 人组成的房间中，至少有两个人的生日（仅考虑月日，不包括年份）相同的概率是多少？
\end{example}

表面上看，23 人远小于一年的天数（365 天），似乎至少两人生日相同的可能性应该非常低。许多人会根据直觉得出这样一个结论：人数远未接近一年中的天数，因此重复的可能性很小。然而，这种看似小概率的事件，实际上在人数23人时就已经超过一半，约为 $50.73\%$。

计算时，可以先求出所有人生日都不同的概率，再用 $1$ 减去这个概率，从而得到至少两人生日相同的概率。假设一年有 365 天，第一个人的生日可以是任意一天，因此有 365 种可能；第二个人的生日需要与第一个不同，则有 364 种可能；第三个人的生日需与前两人不同，则有 363 种可能……依此类推。所有人生日都不同的概率为：
\begin{equation}
P(\text{不同}) = \frac{365}{365} \cdot \frac{364}{365} \cdot \frac{363}{365} \cdots \frac{343}{365}\approx49.27\%~.
\end{equation}

至少两人生日相同的概率可以通过补集计算得到：
\begin{equation}
P(\text{相同})= 1 - P(\text{不同})\approx50.73\%~.
\end{equation}

这一结果之所以显得反直觉，核心在于概率的“非线性增长”。人们往往直观地将概率理解为线性累加，但在实际问题中，事件之间的组合复杂性和交互性使得可形成配对的组合数量随着取样数迅速增加，从而显著提升了总体概率。

\begin{example}{贝叶斯医生问题}
假设有一种疾病，患病概率是 $1\%$，诊断测试的准确率为 $99\%$（即，如果检测者是阳性，那么检测出是阳性以及如果检测者是阴性，那么检测出是阴性的可能性都是$99\%$）。现在一个随机人测试结果为阳性，他实际患病的概率是多少？
\end{example}

一般人的直觉猜想可能是：“测试准确率是 $99\%$，那么阳性结果对应的患病概率也应该是 $99\%$。”这种直觉源于人们倾向于将测试准确率等同于阳性结果的可靠性，而忽略了患病的先验概率和假阳性率的影响。这种误解在低患病率的情况下尤为常见，导致对阳性结果的实际意义产生偏差。事实上，这种情况病人的患病率只有$50\%$。这一结果乍看之下可能令人困惑，但通过贝叶斯定理，可以清楚地揭示这一现象背后的原因。

贝叶斯定理的核心思想是利用先验概率（疾病在测试前的可能性）和条件概率（测试准确性），结合测试结果计算后验概率（实际患病的可能性）。从题目中可以知道：

\begin{itemize}
\item 患病的先验概率：$P(\text{患病}) = 0.01$。
\item 未患病的先验概率：$P(\text{未患病}) = 0.99$。
\item 患病者阳性概率 $P(\text{阳性}|\text{患病}) = 0.99$。
\item 未患病者阳性概率 $P(\text{阳性}|\text{未患病}) = 0.01$。
\end{itemize}

通过贝叶斯公式计算患病的后验概率：
\begin{equation}
P(\text{患病}|\text{阳性}) = \frac{P(\text{阳性}|\text{患病}) \cdot P(\text{患病})}{P(\text{阳性})}~.
\end{equation}

总阳性概率$P(\text{阳性})$是两部分的和：
\begin{equation}
P(\text{阳性}) = P(\text{阳性}|\text{患病}) \cdot P(\text{患病}) + P(\text{阳性}|\text{未患病}) \cdot P(\text{未患病})~.
\end{equation}

代入已知条件可以得到实际患病概率为：
\begin{equation}
P(\text{患病}|\text{阳性}) = \frac{0.99 \cdot 0.01}{(0.99 \cdot 0.01) + (0.01 \cdot 0.99)}= 50\%~.
\end{equation}

这一现象广泛存在于医学、工程和风险评估领域，对实际生活中的医学诊断具有重要启发：
\begin{itemize}
\item 当疾病的患病率较低时，即使测试准确率高，阳性结果的实际患病概率也可能不高。这是因为假阳性率（误诊概率）对总体结果的影响显著，尤其是未患病人数远多于患病人数时。从而，要求检测的误诊率一定要低于患病率，检测出来的结果才有意义。
\item 医生通常不会随机对人群进行测试，而是通过临床诊断筛选出可能患病的高危人群，从而显著提高患病的先验概率。例如，如果通过症状筛查发现某人可能患病，使得做检测的人比随机选取一人而言，大幅提升其先验概率，使阳性测试结果的后验概率更加可靠。
\item 对于无法降低误诊率和难以筛查的病症，根据之前提到的生日悖论，可以通过多个、多次检测来交叉验证，多次检测均误诊的概率会快速下降。
\end{itemize}

\begin{example}{某种生育策略下的男女比例}
一个村子中的人，因为特别喜欢男孩，统一采用下面的生育策略：如果生的是女孩的话，就再生一个孩子，直到生出一个男孩为止。这样许多年后，这个村子的男女比例是多少？
\end{example}

一些人可能会直觉认为，由于生育策略偏向男孩，这样的行为会导致村子中男孩显著多于女孩。也有一些人可能会直觉认为，由于一个男孩之前可能会出现多个女孩，而一家只会有一个男孩，这样的行为会导致村子中女孩显著多于男孩。然而，在题目的前提下，这两种直觉是错误的。无论采用何种个人策略，生物学上的随机性以及概率的平衡性确保了男女比例在大样本中仍保持$1:1$。

为了更细致地讨论各种情况的影响，下面假设人们观念中的最大生育数量是$M$，即生育数量存在一个上限$M$。男孩出生的可能性为$p\in[0,1]$，则有：

\begin{table}[ht]
\centering
\caption{生育可能性表}\label{tab_CitPrb1}
\begin{tabular}{|c|c|c|c|}
\hline
孩子数 & 情况的概率 & 女孩数 & 男孩数 \\
\hline
1 & $p$ & 0 & 1 \\
\hline
2 & $p(1-p)$ & 1 & 1 \\
\hline
3 & $p(1-p)^2$ & 2 & 1 \\
\hline
$\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ \\
\hline
$M-1$ & $p(1-p)^{M-2}$ & $M-2$ & 1 \\
\hline
$M$ & $p(1-p)^{M-1}$ & $M-1$ & 1 \\
\hline
$M$ & $(1-p)^M$ & $M$ & 0 \\
\hline
\end{tabular}
\end{table}

对于每种可能的生育情况，女孩数依次递增，但其发生概率随之指数递减。女孩数的期望值可以表示为：
\begin{equation}
\text{E}(\text{女孩数}) = {1-p\over p}\left(1-(1-p)^M\right)~.
\end{equation}

理论上，无论发生何种情况，最终一定会生出一个男孩，但由于限定了最大生育数$M$，因此存在$M$个孩子是女孩的情况，因此男孩数的期望值为：
\begin{equation}
\text{E}(\text{男孩数}) = 1-(1-p)^M~.
\end{equation}

两者的期望值事实上只相差一个系数，因此比值为：
\begin{equation}
\text{男女比} = \frac{\text{E}(\text{男孩数})}{\text{E}(\text{女孩数})} = \frac{p}{1-p}~.
\end{equation}
而，在此条件下，每对家长所生孩子的个数的期望值为：
\begin{equation}
{1\over p}\left(1-(1-p)^M\right)~.
\end{equation}
特殊情况：$p = \frac{1}{2}$

假设男孩和女孩出生的概率相等（$p = \frac{1}{2}$），则：
	•	男孩数的期望值： $1$。
	•	女孩数的期望值： $1$。
	•	男女比例：
$$
\text{男女比} = \frac{1}{1} = 1:1~.
$$




孩子的个数期望与出生可能性和最大生育数量相关，而生育比与限定人们生育的最大数量无关。一般认为男孩与女孩的出生可能相同，即$p=1\over2$，这时可以发现男女比是$1:1$。

最终一定是有一个男孩会出生的，预期出生的数量则是男生出生率的倒数。

问题就在于，尽管女生的数量会随着女生的出生而依次递增，但这种情况发生的概率却在指数减少。

\subsection{性别推断}

\subsubsection{问题与结论}

问题：

老王家有两个孩子，其中一个孩子是男孩，那么另一个孩子也是男孩的概率是多少？

结论：
“其中一个孩子是男孩”存在语义理解的区别：如果是随机选一个孩子知道他是男孩，则概率是$50\%$；如果是已知至少有一个男孩，则为$\displaystyle 1\over 3$。

\subsubsection{论证过程}
假设两个孩子的性别独立，每个孩子是男孩或女孩的概率都是 $\frac{1}{2}$。
家庭的可能组合为：
\item男孩-男孩
\item男孩-女孩
\item女孩-男孩
\item女孩-女孩（排除，因为至少有一个是男孩）

剩下的三种可能性中，只有一种是两个都是男孩。因此概率是 $\frac{1}{3}$。

\subsection{三门问题}

\subsubsection{问题与结论}

问题：

在一个游戏中，你面前有三个门，其中一扇后面有车，另外两扇后面是山羊。选手选定一个门后，主持人会打开另一个有山羊的门，并问选手是否愿意换门。请问：换门是否会增加赢得汽车的概率？

结论：

换门会增加赢得汽车的概率。

\subsubsection{论证过程}


解析：
\item初始选门时，选到汽车的概率是 $\frac{1}{3}$，选到山羊的概率是 $\frac{2}{3}$。
\item主持人打开一扇山羊的门后，如果最初选的是山羊（概率 $\frac{2}{3}$），换门必定赢。
\item换门的成功概率是 $\frac{2}{3}$，不换的成功概率是 $\frac{1}{3}$。



\subsection{圆内随机选点的直径问题}

\subsubsection{问题与结论}
问题：
在一个圆内随机选择两个点，连接它们构成一条线段。请问这条线段是圆直径的概率是多少？

直觉分析

很多人会认为，这条线段成为直径的概率非常低，因为直径是一条特殊的直线，随机选点后能正好碰到直径似乎是小概率事件。

然而，实际概率的结果和选点的方式密切相关！这是一个非常经典且反直觉的问题。


\subsubsection{论证过程}
解答方式 1：几何概率分析

要使一条线段成为直径，两点必须刚好在圆的直径两端。关键在于：
\item随机选点“如何定义”？
不同的“随机”选法会导致完全不同的概率结果。

以下是两种常见的选法及其概率计算：

方式一：点均匀分布在圆内
\item在圆内任意选择两个点，假设点是均匀分布的。
\item对于圆的任意一条直径，只有当两点恰好位于直径的两端时，这条线段才是直径。

在这种分布下，概率为 0。
因为随机选点时，两点恰好位于直径两端的可能性是无穷小的（属于测度为 0 的事件）。

方式二：点均匀分布在圆周上
\item在圆周上随机选两个点，构成的线段是直径的条件是：两点相隔 $180^\circ$。
\item圆周上的两点位置可以用角度描述，第一点固定后，第二点均匀分布在 $[0^\circ, 360^\circ)$ 上。

两点相隔 $180^\circ$ 的概率为：
$$
P = \frac{1}{360^\circ} \cdot 2 = \frac{1}{2}~.
$$
所以，在这种情况下，概率为 $\frac{1}{2}$。

结论
	1.	如果点均匀分布在圆内：概率为 $0$（几何意义上）。
	2.	如果点均匀分布在圆周上：概率为 $\frac{1}{2}$。

这是一个很经典的概率问题，明确随机分布的方式是关键！如果还有疑问，欢迎继续讨论~