% Wireshark 笔记

\begin{issues}
\issueDraft
\end{issues}

\begin{figure}[ht]
\centering
\includegraphics[width=10cm]{./figures/wiresh_1.png}
\caption{Wireshark 初始界面} \label{wiresh_fig1}
\end{figure}

\begin{figure}[ht]
\centering
\includegraphics[width=5cm]{./figures/wiresh_2.png}
\caption{Wireshark 抓包界面} \label{wiresh_fig2}
\end{figure}


\begin{itemize}
\item 参考\href{https://www.varonis.com/blog/how-to-use-wireshark}{这个教程}。
\item Ubuntu 安装： \verb|sudo apt install wireshark|
\item Wireshark 是一个 packet sniffer and analysis tool， 可以抓获 TCP, DNS, SSH, HTTP(S)   等协议的数据包
\end{itemize}

一个 256 的 TCP 包的构成：
\begin{itemize}
\item 14 (Ether) + 20 (IP) + 20 (TCP) + 202 (payload)
\item \textbf{Ether 的构成}： 6 (MAC) * 2 + 2 (type-IPv4)
\item \textbf{IP 的构成}： 1 (v4 固定是len=20) + 1 (diff service field) + 2 (IP 包长度 242) + 2 (ID) + 2 (frag offset) + 1 (time to live) + 1 (protocol-TCP) + 2 (header checksum) + 4 (src IP) + 4 (dst IP)
\item \textbf{TCP 的构成}： 2 (src port) + 2 (dst port) + 202 (seg len) + 4 (seq num) + 4 (ack num) + 1 (PSH) + 1 (ACK) + 2 (Window) + 2 (chk sum) + 2 (urgent ptr)
\item \textbf{payload 的构成}： 202
\end{itemize}
