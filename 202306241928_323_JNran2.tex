% 贝叶斯公式
% 概率论

\pentry{条件概率 \upref{HsCpMi}，从集合论角度看随机事件\upref{JNran1}}
\subsection{前言}
贝叶斯公式可常常用于概率模型中的统计推断。在开始讨论贝叶斯公式前，我们需要定义几个概念。
\begin{definition}{划分}
设S为一个样本空间，我们定义对一个样本空间的划分为一系列的事件$A_1,A_2,A_3...,A_n$，这些事件对于$\forall i,j $ 且$i\neq j$都满足$A_i \cap A_j = \emptyset$,且对于他们的并集满足$A_1\cup A_2\cup ...\cup A_n = S$。
\end{definition}
划分是对样本空间进行的两两互不相交的切割，当我们有了划分后，对于任意一个事件$B$发生的概率，就可以看做是在每个划分中$B$事件发生的概率再乘以每个划分发生的概率。
\begin{theorem}{全概率公式}
设$A_1,A_2,...A_n$是样本空间$S$的一个划分，则任意一个事件$B$发生的概率可以写为$P(B) = \sum_i P(B A_i)= \sum_i P(B| A_i) P(A_i)$
\end{theorem}
证明如下，我们可以将事件B作一个切分，$B = B \cap S = B \cap (A_1 \cup A_2 \cup ...\cup A_n)$,根据集合运算的分配率，我们有
\begin{aligned}
B = (B\cap A_1) \cup (B\cap A_2) \cup ... \cup (B \cap A_n)~
\end{aligned}
由于$\{A_i\}$是$S$的划分，有$A_i \cap A_j = \emptyset$，而 $(B\cap A_i) \cap (B\cap A_j) \subseteq A_i \cap A_j$,于是我们知道$(B\cap A_i) \cap (B \cap A_j) = \emptyset$。根据概率与条件概率的定义，我们有
\begin{align}
P(B) = \sum_i P(B\cap A_i)  = \sum_i P(B | A_i) P(A_i)~
\end{align}
\subsection{贝叶斯公式}
\begin{theorem}{贝叶斯公式}
设$S$为样本空间，$A_1,A_2,...A_n$为样本空间的一个划分，$B$为一个事件，则有
\begin{equation}
P(A_i|B) = \frac{P(B|A_i)P(A_i)}{P(B)} = \frac{P(B|A_i)P(A_i)}{\sum_j P(B|A_j)P(A_j)}~
\end{equation}
\end{theorem}
贝叶斯公式证明是简单的：
